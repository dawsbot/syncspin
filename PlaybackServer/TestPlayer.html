<html>
 <head>
  <title>My Beats Music Player</title>
 </head>
 <body>
  <script src="http://bam.cdn.beatsmusic.com/bam-1.0.2.min.js"></script>
  <script>
  	function getJsonFromUrl() {
  		var query = location.search.substr(1);
  		var result = {};
  		query.split("&").forEach(function(part) {
    	var item = part.split("=");
    	result[item[0]] = decodeURIComponent(item[1]);
  	});
  	return result;
	}

  	var bam = new BeatsAudioManager("myBeatsPlayer");
	bam.on("ready", handleReady);
	bam.on("error", handleError);
	function handleReady(value) { 
    bam.clientId = [ytuyn29p9e5b4udwtgwmughe];
    bam.authentication = {
        access_token:getJsonFromUrl(), 
        user_id:ytuyn29p9e5b4udwtgwmughe
    };
    bam.identifier = [tr82702885];
    bam.load();
};
function handleError(value) {
    console.log("Error: " + value);
    switch(value){
        case "auth":
        // Beats Music API auth error (401)
        break;
        case "connectionfailure":
        // audio stream connection failure
        break;
        case "apisecurity":
        // Beats Music API crossdomain error
        break;
        case "streamsecurity":
        // audio stream crossdomain error
        break;
        case "streamio":
        // audio stream io error
        break;
        case "apiio":
        // Beats Music API io error getting track data
        break;
        case "flashversion":
        // flash version too low or not installed
        break;
    }
};
  </script>
 </body>
</html>