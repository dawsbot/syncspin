<!DOCTYPE html>
<html lang="en">
 <head>
  <title>SyncSpin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">

 </head>
 <body>
  <div class="container">
    <form>
     <input id = 'songID' type="text" >
     <button id= 'submitID' type="button" class = "btn btn-default btn-md">Submit New Track id</button>
    </form>
    <div class=".col-md-8">
    <div class="player">
    <button id="play" type="button" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-play"></span> Play
    <button id="pause" type="button" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-pause"></span> Pause
    <button id="stop" type="button" class="btn btn-default btn-lg">
  <span class="glyphicon glyphicon-stop"></span> Stop
  <button id="next" type="button" class="btn btn-default btn-lg">
    <span class="glyphicon glyphicon-fast-forward"></span> Next
  </div>
</div>
</button>
   
  </div>
  <script src="bootstrap/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <script src="http://bam.cdn.beatsmusic.com/bam-1.0.2.min.js"></script>
  <script>
    function getJsonFromUrl() {
        var query = location.search.substr(1);
        var result = {};
        query.split("&").forEach(function(part) {
        var item = part.split("=");
        result[item[0]] = decodeURIComponent(item[1]);
    });
    return result;
    }

    var bam = new BeatsAudioManager("SyncSpin");
    bam.on("ready", handleReady);
    bam.on("error", handleError);
    //bam.on("ended", handleEnded);
    function handleReady(value) { 
    bam.clientId = "ytuyn29p9e5b4udwtgwmughe";
    var token = getJsonFromUrl()
    console.log(token.access_token)
    bam.authentication = {
        access_token:token.access_token, 
        user_id:"liam.t.sargent"
    };
    bam.identifier = "tr82702885";
    bam.autoplay = true;
    bam.load();
};
function handleError(value) {
    console.log("Error: " + value);
    switch(value){
        case "auth":
        console.log("auth error = ")
        // Beats Music API auth error (401)
        break;
        case "connectionfailure":
        // audio stream connection failure
        break;
        case "apisecurity":
        // Beats Music API crossdomain error
        break;
        case "streamsecurity":
        // audio stream crossdomain error
        break;
        case "streamio":
        // audio stream io error
        break;
        case "apiio":
        // Beats Music API io error getting track data
        break;
        case "flashversion":
        // flash version too low or not installed
        break;
    }
};

function loadNextSong(trackID) {
    bam.identifier=trackID;
    bam.load();
};

function playSong() {
    bam.play()
};

//function handleEnded() {
        //loadNextSong("tr82702885");
//};
    
//jukeboxControl()

$( "#play" ).click(function() {
    bam.play()
});
$( "#pause" ).click(function() {
    bam.pause()
});
$( "#stop" ).click(function() {
    bam.stop()
});
$( "#next" ).click(function() {
    loadNextSong('tr39611761')
});
$("#submitID").click(function(){
    loadNextSong($("#songID").val());
});
  </script>
 </body>
</html>